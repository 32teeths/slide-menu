"use strict";function _classCallCheck(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function t(t,i){for(var e=0;e<i.length;e++){var n=i[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(i,e,n){return e&&t(i.prototype,e),n&&t(i,n),i}}();!function(t){var i="slideMenu",e={position:"right",showBackLink:!0,submenuLinkBefore:"",submenuLinkAfter:"",backLinkBefore:"",backLinkAfter:""},n=function(){function i(t){_classCallCheck(this,i),this.options=t,this._menu=t.elem,this._menu.find("ul:first").wrap('<div class="slider">'),this._anchors=this._menu.find("a"),this._slider=this._menu.find(".slider:first"),this._isOpen=!1,this._isAnimating=!1,this._hasMenu=this._anchors.length>0,this._setupEventHandlers(),this._setupMenu(),this._hasMenu&&this._setupSubmenus()}return _createClass(i,[{key:"toggle",value:function(){var t=arguments.length<=0||void 0===arguments[0]?null:arguments[0],i=void 0;return null===t?void(this._isOpen?this.close():this.open()):(t?(i=0,this._isOpen=!0):(i="left"===this.options.position?-this._menu.outerWidth():this._menu.outerWidth(),this._isOpen=!1),void this._triggerAnimation(this._menu,i))}},{key:"open",value:function(){this.toggle(!0)}},{key:"close",value:function(){this.toggle(!1)}},{key:"back",value:function(){this._navigate(null,-1)}},{key:"_setupEventHandlers",value:function(){var i=this;this._hasMenu&&this._anchors.click(function(e){var n=t(e.target).is("a")?t(e.target):t(e.target).parents("a:first");i._navigate(n)}),t(this._menu.add(this._slider)).on("transitionend msTransitionEnd",function(){"hidden"===i._menu.css("visibility")&&i._menu.css("visibility","visible"),i._isAnimating=!1})}},{key:"_navigate",value:function(t){var i=arguments.length<=1||void 0===arguments[1]?1:arguments[1];if(!this._isAnimating){var e=void 0,n=void 0,s=void 0;if(e=Number(this._menu.data("level"))||0,n=(e+i)*-this._menu.outerWidth(),i>0){if(!t.next("ul").length)return;t.next("ul").addClass("active").show()}else{if(0===e)return;s="ul "+".active ".repeat(e),this._menu.find(s).removeClass("active").fadeOut()}this._menu.data("level",e+i),this._triggerAnimation(this._slider,n)}}},{key:"_triggerAnimation",value:function(t,i){t.css("transform","translateX("+i+"px)"),this._isAnimating=!0}},{key:"_setupMenu",value:function(){switch(this.options.position){case"left":this._menu.css({left:0,right:"auto",transform:"translateX("+-this._menu.outerWidth()+"px)"});break;default:this._menu.css({left:"auto",right:0})}}},{key:"_setupSubmenus",value:function(){var i=this;this._anchors.each(function(e,n){if(n=t(n),n.next("ul").length){var s=n.text();if(n.html(i.options.submenuLinkBefore+s+i.options.submenuLinkAfter),n.click(function(t){t.preventDefault()}),i.options.showBackLink){var a=t('<a href="#" class="slide-menu-control" data-action="back">'+s+"</a>");a.html(i.options.backLinkBefore+a.text()+i.options.backLinkAfter),n.next("ul").prepend(t("<li>").append(a))}}})}}]),i}();t("body").unbind().on("click",".slide-menu-control",function(){var e=void 0,n=t(this).data("target");if(e=n&&"this"!==n?t("#"+n):t(this).parents(".slide-menu:first"),e.length){var s=e.data(i),a=t(this).data("action");s&&"function"==typeof s[a]&&s[a]()}}),t.fn[i]=function(s){s=t.extend({},e,s),s.elem=t(this);var a=new n(s);return t(this).data(i,a),a}}(jQuery);